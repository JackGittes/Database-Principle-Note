## 数据库原理与应用 第三十三讲 数据库管理系统结构

- 作者：**赵明心**
- 日期：**2019年8月15日**

---

## 四、数据库管理系统结构

了解DBMS内部的实现技术，有助于我们摸清自己所使用的DBMS产品的特点，使得我们开发的应用运行效率更高、更稳定。本章分成了几个部分：

- DBMS的架构
  - DBMS的内核组件
  - DBMS的运行进程结构
- 数据库访问管理
- 查询优化
- 事务管理
  - 恢复
  - 并发控制

访问管理是物理层的实现方式，直接跟操作系统打交道，把数据模型的概念转换成存储在磁盘中的文件，这个模块也就是存储管理模块。重点是介绍查询优化，就是一个SQL查询语句在DBMS内部的优化，怎么尽可能优化效率在海量数据中进行查询。最后是介绍事务管理，介绍企业级多任务多用户访问数据库的时候，保证多用户同时访问数据库的时候可以保护数据一致性，同时还有恢复机制，当出现软硬件故障和系统崩溃的时候可能会对数据库的一致性产生破坏，这就需要有恢复机制。

本章主要介绍以上四个方面的内容，理解这四个部分就可以对RDBMS有一个大致的认识。在研究生课程中，还有DBMS实现技术课程，会更加全面。

### **4.1 DBMS的核心模块组成**

有几大块，第一个是parser，主要是对用户的语句进行语法分析，其次是GRANT Checking模块，主要是检查用户是否被授权执行这条语句。之后是语义分析和查询处理模块，这个是一个DBMS核心中的核心，各种SQL语句的功能都是在这个模块中实现。再往下是物理层，实现将表的操作转化成对文件的操作。同时并列的还有并发控制和恢复机制。再往下就是操作系统。

往DBMS上面走就是一些用户接口，其中UFI是即席访问接口，就是用户借助命令行或者GUI等直接进行执行。还有一大类是API，就是像ODBC、JDBC等用户接口，这是数据库给用户提供的应用程序接口，UFI是即席访问接口，是交互式访问接口。无论什么接口都是提供给用户访问方法。在接口上运行的就是各种各样的应用程序。嵌入式SQL、ODBC等等都是在使用某种接口所提供的访问方法。虚线框所框的DBMS的核心只接收一种数据，就是SQL语句，由上层接口来统一将用户输入转化成SQL来提交给核心，再由核心的Parser进行分析，语法分析的结果生成一棵语法树，这个时候机器就可以知道用户的这条语句有什么作用，下面就可以进行权限检查。系统这个时候可以分析用户是否有权对某张表有插删改、查询等操作。

如果权限检查没有通过，用户会收到一条错误。同样的，在parser层，如果有语法错误，也会报错。实现查询和插删改操作的时候就需要物理层的API函数，这个部分就是先