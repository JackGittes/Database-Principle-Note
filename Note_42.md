## 数据库原理与应用 第四十二讲 事务与日志

- 作者：**赵明心**
- 日期：**2019年8月20日**

---

### **4.5.2 事务**

一个事务（transaction） $T$实际上是一组有限的动作序列（SQL语句），这组语句具有下面的几个性质：

1. 原子性（Atomic）：这组语句要么全部成功，要么一条也没有做
2. 保持一致性（Consistency preservation）：数据库从一个一致性状态过渡到另一个一致状态
3. 隔离性（Isolation）：在一个多用户数据库系统中，多个用户并发访问，每个事务应该互不干扰，以至于感受不到其他事务的存在，这个和操作系统中进程的隔离性是很相似的
4. 持久性（Durability）：一个事务只要成功完成，那么它对数据库产生的影响应该永久反映在数据库当中

将这四个事务的特性首字母连在一起就构成了事务运行的ACID准则。具有这样一组特性的SQL语句就构成了一个事务。ACID准则有什么用处呢？

举个例子，将一笔钱转账，$S$这笔钱从账号$A$转给账号$B$，那么在数据库当中需要从$A$数据库中减掉$S$的钱，对应在$B$中需要加上这些。如果没有事务机制，只是通过一条条SQL语句执行的话，有可能在执行过程中出现断电，操作只完成了一部分，而无法实现原子性。

但是有了事务机制之后就可以保证原子性。在数据库中可以显式创建一个事务。